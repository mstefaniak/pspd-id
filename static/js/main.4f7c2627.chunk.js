(this["webpackJsonppspd-id"]=this["webpackJsonppspd-id"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),a=n(6),c=n.n(a),o=(n(12),n(7)),i=n(4),d=(n(13),n(2)),l=n.n(d),u=n(3),m=n.p+"static/media/logo.860f766d.png",p="https://crm-test.pspd.org.pl/api",x=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/user/token"),{method:"POST",body:JSON.stringify({username:t,password:n}),headers:{"Content-Type":"application/json"}});case 2:return s=e.sent,e.next=5,s.json();case 5:return r=e.sent,e.abrupt("return",r.token);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var s,r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t,n);case 2:return r=e.sent,e.next=5,fetch("".concat(p,"/user/login"),{method:"POST",body:JSON.stringify({username:t,password:n}),credentials:"include",headers:{"Content-Type":"application/json","X-CSRF-Token":r}});case 5:return a=e.sent,e.next=8,a.json();case 8:return c=e.sent,e.abrupt("return",{isLogged:a.status<400,token:null!==(s=null===c||void 0===c?void 0:c.token)&&void 0!==s?s:""});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var s,r,a,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t,n);case 2:if(s=e.sent,r=s.isLogged,a=s.token,r){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,fetch("".concat(p,"/data/userdata"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-CSRF-Token":a}});case 9:return c=e.sent,e.next=12,c.json();case 12:if(!(o=e.sent)||!o.length){e.next=15;break}return e.abrupt("return",o[0]);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=n(0),b=function(e){var t=e.onSuccess,n=Object(s.useState)(),r=Object(i.a)(n,2),a=r[0],c=r[1],o=Object(s.useState)(),d=Object(i.a)(o,2),p=d[0],x=d[1],g=Object(s.useState)(!1),b=Object(i.a)(g,2),h=b[0],v=b[1],y=function(){var e=Object(u.a)(l.a.mark((function e(n){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!p||!a){e.next=6;break}return e.next=4,j(a,p);case 4:(s=e.sent)?t(s):v(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"min-h-screen flex items-start justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:Object(f.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("img",{src:m,alt:"logo",className:"-mb-20 -mt-10"}),Object(f.jsx)("h2",{className:"text-center text-2xl font-extrabold text-gray-900",children:"LEGITYMACJA"})]}),h&&Object(f.jsx)("div",{className:"bg-red-200 text-red-600 p-4 text-center rounded",children:"Niepoprawny email i/lub has\u0142o"}),Object(f.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:y,children:[Object(f.jsx)("input",{type:"hidden",name:"remember",value:"true"}),Object(f.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email"}),Object(f.jsx)("input",{value:a,onChange:function(e){c(e.target.value)},id:"email-address",name:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Has\u0142o"}),Object(f.jsx)("input",{value:p,onChange:function(e){x(e.target.value)},id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Has\u0142o"})]})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500",children:"Zaloguj"})})]})]})})},h=function(e){var t=e.firstName,n=e.lastName,s=e.id,r=e.status,a=e.joinDate,c="Current"===r;return Object(f.jsx)("div",{className:"sm:min-h-screen sm:flex sm:items-start sm:justify-center sm:bg-gray-50 sm:py-12",children:Object(f.jsxs)("div",{className:"sm:max-w-lg sm:shadow bg-white overflow-hidden sm:rounded-lg",children:[Object(f.jsxs)("div",{className:"px-4 py-1 sm:px-6 grid grid-cols-2",children:[Object(f.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 flex items-center",children:"Legitymacja"}),Object(f.jsx)("div",{className:"flex justify-end",children:Object(f.jsx)("img",{src:m,className:"App-logo",alt:"logo"})})]}),Object(f.jsx)("div",{className:"border-t border-gray-200",children:Object(f.jsxs)("dl",{children:[Object(f.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Object(f.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Imi\u0119 i nazwisko"}),Object(f.jsxs)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:[t," ",n]})]}),Object(f.jsxs)("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Object(f.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Numer"}),Object(f.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:s})]}),Object(f.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Object(f.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Sk\u0142adka op\u0142acona"}),Object(f.jsx)("dd",{className:"mt-1 text-sm text-green-600 sm:mt-0 sm:col-span-2",children:Object(f.jsx)("span",{className:c?"text-green-600":"text-red-600",children:c?"TAK":"NIE"})})]}),Object(f.jsxs)("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Object(f.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Data przyst\u0105pienia"}),Object(f.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(new Intl.DateTimeFormat).format(1e3*Number(a))})]})]})})]})})},v=function(){var e=Object(s.useState)(),t=Object(i.a)(e,2),n=t[0],r=t[1];return n?Object(f.jsx)(h,Object(o.a)({},n)):Object(f.jsx)(b,{onSuccess:function(e){r(e)}})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),s(e),r(e),a(e),c(e)}))},O=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(v,{})}),document.getElementById("root")),y(),function(){if("serviceWorker"in navigator){if(new URL("/pspd-id",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/pspd-id","/service-worker.js");O?(!function(e){fetch(e).then((function(t){var n,s;404===t.status||-1===(null===t||void 0===t||null===(n=t.headers)||void 0===n||null===(s=n.get("content-type"))||void 0===s?void 0:s.indexOf("javascript"))?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):w(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):w(e)}))}}()}},[[16,1,2]]]);
//# sourceMappingURL=main.4f7c2627.chunk.js.map